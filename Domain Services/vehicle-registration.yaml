openapi: 3.0.0
info:
  version: 1.1.0
  title: Vehicle Registry
  description: |
    ### API specs to capture Vehicle details###
    * Allow to add the new Vehicle details
    * Allow to update the existing Vehicle details
    * Search the Vehicle by unique no
    *
  contact:
    name: Egovernments Foundation
    email: contact@egovernments.org
x-module: FSM
x-common-path: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml'
paths:
  /vehicle/v1/_search:
    post:
      summary: Get the Vehicle details
      description: |
        Gets the list of Vehicle for a particular ULB based on search criteria.
      parameters:
        - $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/parameters/tenantId'
        - name: registrationNumber
          in: query
          description: Allows search for service type - comma separated list
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: ids
          in: query
          description: Search by list of UUID
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: mobileNumber
          in: query
          description: Search by mobile number of service requester
          schema:
            type: string
        - name: ownerId
          in: query
          description: Search by uuid  of service requester
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: type
          in: query
          description: Search by type of the vehicle
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: model
          in: query
          description: Search by model of the vehicle
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: tankCapacity
          in: query
          description: Search by tankCapacity of the vehicle
          schema:
            type: string
        - name: sortBy
          in: query
          description: sort the search results by fields
          schema:
           type: string
           enum:
            - type
            - model
            - suctionType
            - pollutionCertiValidTill
            - InsuranceCertValidTill
            - fitnessValidTill
            - roadTaxPaidTill
            - tankCapicity
            - createdTime
        - name: sortOrder
          in: query
          description: sorting order of the search resulsts
          schema:
            type: string
        - name: suctionType
          in: query
          description: Search by model of the vehicle
          schema:
            type: array
            items:
              type: string
        - name: limit
          in: query
          description: limit on the resulsts
          schema:
            type: string
        - name: offset
          in: query
          description: offset index of the overall search resulsts
          schema:
            type: string
      responses:
        '202':
          description: Successful response sorted by reverse chrnological order of creation
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleResponse'
        '400':
          description: Invalid input.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
      tags:
        - Vehicle
  /vehicle/v1/_create:
    post:
      summary: Add new vehicle  
      description: Add the vehicle details into the system
      tags:
        - Vehicle
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehicleRequest'
        description: Request schema.
        required: true
      responses:
        '202':
          description: Request submitted successfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleResponse'
        '400':
          description: Failed to process the Request
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
  /vehicle/v1/_update:
    post:
      summary: Update existing vehicle details
      description: Updates the details of the vehicle 
      tags:
        - Vehicle
      responses:
        '202':
          description: Request submitted successfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleResponse'
        '400':
          description: Failed to process the application
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehicleRequest'
        description: Request schema.
        required: true
  /vehicle/v1/_plainsearch:
    post:
      tags:
        - Vehicle
      summary: Get the Vehicle details via plain search
      description: |
        Gets the list of Vehicle for a particular ULB based on plain search criteria.
      operationId: plainsearchUsingPOST
      parameters:
        - name: applicationStatus
          in: query
          description: search application by list of application Status(s)
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: ids
          in: query
          description: "List of system generated ids of applications."
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: limit
          in: query
          description: limit
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: mobileNumber
          in: query
          description: Search by mobile number of service requester
          required: false
          style: form
          schema:
            type: string
        - name: model
          in: query
          description: Search by model of the vehicle
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: offset
          in: query
          description: offset index of the overall search resulsts
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: ownerId
          in: query
          description: Search by uuid of service requester
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: registrationNumber
          in: query
          description: Allows search for service type - comma separated list
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: sortBy
          in: query
          description: sort the search results by fields
          required: false
          style: form
          schema:
            type: string
            enum:
              - InsuranceCertValidTill
              - createdTime
              - fitnessValidTill
              - model
              - pollutionCertiValidTill
              - roadTaxPaidTill
              - suctionType
              - tankCapicity
              - type
              - vehicleOwner
        - name: sortOrder
          in: query
          description: sorting order of the search resulsts
          required: false
          style: form
          schema:
            type: string
            enum:
              - ASC
              - DESC
        - name: status
          in: query
          description: "status of request processing - to be enhanced in futuer to include INPROGRESS"
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: suctionType
          in: query
          description: Search by suction model of the vehicle
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: tankCapacity
          in: query
          description: Search by tankCapacity of the vehicle
          required: false
          style: form
          schema:
            type: number
            format: double
        - name: tenantId
          in: query
          description: Unique id for a tenant.
          required: false
          style: form
          schema:
            type: string
        - name: type
          in: query
          description: Search by type of the vehicle
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: vehicleOwner
          in: query
          description: vehicle owner details
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: vehicleWithNoVendor
          in: query
          description: Vehicle without vendor
          required: false
          style: form
          schema:
            type: boolean
        - name: vendorVehicleStatus
          in: query
          description: Vendor vehicle status
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestInfoWrapper'
      responses:
        '200':
          description: Successful response sorted by reverse chrnological order of creation
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleResponse'
        '201':
          description: Created
        '400':
          description: Invalid input.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found      
  /vehicle/v1/fetchApplicationStatusCount:
    post:
      tags:
        - Vehicle
      summary: Fetch Application Count 
      description: This api fethces application count
      operationId: fetchApplicationCountUsingPOST
      requestBody:
        description: Request schema.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehicleSearchCriteria'
      responses:
        '200':
          description: Successful Response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleCustomResponse'
        '201':
          description: Created
        '400':
          description: Failed to process the Request
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'  
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found        
  /vehicle/v1/searchTrip:
    post:
      tags:
        - Vehicle
      summary: Fetch Vehicle Trip Detail
      description: This api fetches vehicle trip details
      operationId: fetchVehicleTripDetailUsingPOST
      requestBody:
        description: Request schema.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehicleTripSearchCriteria'
      responses:
        '200':
          description: Successful Response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleTripDetailResponse'
        '201':
          description: Created
        '400':
          description: Failed to process the Request
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'  
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found        
  /vehicle/trip/v1/_search:
    post:
      summary: Get the VehicleTrip details
      description: |
        Gets the list of VehicleLog for a particular ULB based on search criteria.
      parameters:
        - $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/parameters/tenantId'
        - name: registrationNumber
          in: query
          description: Allows search for service type - comma separated list
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: ids
          in: query
          description: Search by list of UUID of vehicleLog
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: tripOwnerIds
          in: query
          description: Search by list of UUID of of the trip owners
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: driverIds
          in: query
          description: Search by list of UUID of of the drivers
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: vehicleIds
          in: query
          description: Search by list of UUID of vehicle(s)
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: referenceNos
          in: query
          description: Search by the referenceNo(s)
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: applicationNos
          in: query
          description: Search by the applicationNo(s)
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name: businessService
          in: query
          description: search by the businessService of the vehicleLog
          schema:
            type: string
        - name: applicationStatus
          in: query
          description: search by the list of applicationStatus of the vehicleLog
          schema:
            type: array
            items:
              type: string
              maxItems: 10
        - name : offset
          in: query
          description: offset for the pagination results
          schema:
            type: integer
        - name: limit
          in: query
          description: limit for the pagination results
          schema:
           type: integer
        - name: sortOrder
          in: query
          description: sort the search results in Ascending or descending order
          schema:
           type: string
           enum:
            - ASC
            - DESC
        - name: sortBy
          in: query
          description: sort the search results by fields
          schema:
           type: string
           enum: 
            - applicationStatus
            - applicationiNo
            - referenceNo
            - vehicle
            - tripStartTime
            - tripEndTime
            - createdTime
      responses:
        '202':
          description: Successful response sorted by reverse chrnological order of creation
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleTripResponse'
        '400':
          description: Invalid input.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
      tags:
        - VehicleTrip
  /vehicle/trip/v1/_create:
    post:
      summary: Add new vehicleLog  
      description: Add the vehicleLog details into the system
      tags:
        - VehicleTrip
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehicleTripRequest'
        description: Request schema.
        required: true
      responses:
        '202':
          description: Request submitted successfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleTripResponse'
        '400':
          description: Failed to process the Request
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
  /vehicle/trip/v1/_update:
    post:
      summary: Update existing vehicleLog details
      description: Updates the details of the vehicleLog
      tags:
        - VehicleTrip
      responses:
        '202':
          description: Request submitted successfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleTripResponse'
        '400':
          description: Failed to process the application
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VehicleTripRequest'
        description: Request schema.
        required: true
  /vehicle/trip/v1/_plainsearch:
    post:
      tags:
        - VehicleTrip
      summary: Get the VehicleTrip details via plain search
      description: |
        Gets the list of VehicleLog for a particular ULB based on plain search criteria.
      operationId: plainsearchUsingPOST_1
      parameters:
        - name: applicationNos
          in: query
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: applicationStatus
          in: query
          description: search application by list of application Status(s)
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: businessService
          in: query
          description: 'Billing system details e.g., PropertyTax,Water Charges etc.'
          required: false
          style: form
          schema:
            type: string
        - name: driverIds
          in: query
          description: Search by list of UUID of of the drivers
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: ids
          in: query
          description: List of system generated ids of applications.
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: limit
          in: query
          description: limit
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: offset
          in: query
          description: offset index of the overall search resulsts
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: refernceNos
          in: query
          description: Search by the referenceNo(s)
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: sortBy
          in: query
          description: sort the search results by fields
          required: false
          style: form
          schema:
            type: string
            enum:
              - applicationStatus
              - applicationiNo
              - createdTime
              - referenceNo
              - tripEndTime
              - tripStartTime
              - vehicle
        - name: sortOrder
          in: query
          required: false
          style: form
          schema:
            type: string
            enum:
              - ASC
              - DESC
        - name: tenantId
          in: query
          description: Unique id for a tenant.
          required: false
          style: form
          schema:
            type: string
        - name: tripOwnerIds
          in: query
          description: Search by list of UUID of of the trip owners
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: vehicleIds
          in: query
          description: Search by list of UUID of vehicle(s)
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
      requestBody:
        description: Request schema.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestInfoWrapper'
      responses:
        '200':
          description: Successful response sorted by reverse chrnological order of creation
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/VehicleTripResponse'
        '201':
          description: Created
        '400':
          description: Invalid input.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/ErrorRes'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found      
components:
  schemas:
    Vehicle:
      type: object
      description: |
        Instance of Service request raised for a particular service. As per extension propsed in the Service definition "attributes" carry the input values requried by metadata definition in the structure as described by the corresponding schema.

        * Any one of 'address' or '(lat and lang)' or 'addressid' is mandatory
      properties:
        vehicleOwner:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/UserInfo'
        id:
          type: string
          readOnly: true
          description: The server generated unique ID(UUID).
          minLength: 2
          maxLength: 64
        tenantId:
          type: string
          description: Unique identifier of the tenant.
          minLength: 2
          maxLength: 64
        registrationNumber: 
          type: string
          description: Unique Vehicle registration number.
          minLength: 2
          maxLength: 128
        model:
          type: string
          description: Vehicle model number(this the master data defined in MDMS).
          minLength: 2
          maxLength: 256
        type:
          type: string
          description: Vehicle Type master, defined in MDMS. 
          minLength: 2
          maxLength: 64
        tankCapicity:
          type: integer
          format: int64
          description: Tank capacity in liters. 
          minLength: 2
          maxLength: 64
        suctionType:
          type: string
          description: This is the mdms master data. 
          minLength: 2
          maxLength: 64
        pollutionCertiValidTill:
          type: integer
          format: int64
          description: Pollution certificate valid till for vehicle(epoc date). 
          minLength: 2
          maxLength: 64
        InsuranceCertValidTill:
          type: integer
          format: int64
          description: Vehicle insurance valid till(epoc date). 
          minLength: 2
          maxLength: 64
        fitnessValidTill:
          type: integer
          format: int64
          description: Vehicle fitness valid till(epoc date). 
          minLength: 2
          maxLength: 64
        roadTaxPaidTill:
          type: integer
          format: int64
          description: Road tax paid for the Vehicle. 
          minLength: 2
          maxLength: 64
        gpsEnabled:
          type: boolean
          description: Whether Vehicle equipped with GPS device. 
        additionalDetail:
          type: object
          description: This is the json object that will carry the actual input (whereever the metadata requries input). Structure should be same as the schema definition provided in the metadata of the service (schema compliance check to be performed at client/server)
        source:
          type: string
          description: 'Source mdms master data. Which captures the source of the service request(ex:- whatsapp, ivr, Swachhata etc)'
          minLength: 2
          maxLength: 64
          example: whatsapp, ivr etc
        status:
          type: string
          description: Inactive records will be consider as soft deleted 
          enum:
           - ACTIVE
           - INACTIVE
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/AuditDetails'
      required:
        - tenantId
        - registrationNumber
        - model
        - type
    VehicleCustomResponse:
      title: VehicleCustomResponse
      type: object
      properties:
        applicationIds:
          type: array
          description: application ids
          items:
            type: string
        applicationStatusCount:
          type: array
          description: application status count
          items:
            type: object
            additionalProperties:
              type: object
        responseInfo:
          $ref: '#/components/schemas/ResponseInfo'    
    VehicleSearchCriteria:
      title: VehicleSearchCriteria
      type: object
      properties:
        applicationStatus:
          type: array
          description: application status
          items:
            type: string
        ids:
          description: "List of system generated ids of applications."
          type: array
          items:
            type: string
        limit:
          description: Limit
          type: integer
          format: int32
        mobileNumber:
          type: string
          description: "MobileNumber of vehicle owners"
        model:
          description: Vehicle model number(this the master data defined in MDMS).
          type: array
          items:
            type: string
        offset:
          description: offset index of the overall search resulsts
          type: integer
          format: int32
        ownerId:
          description: uuid of service requester
          type: array
          items:
            type: string
        registrationNumber:
          description: Allows search for service type - comma separated list
          type: array
          items:
            type: string
        sortBy:
          description: sort the search results by fields
          type: string
          enum:
            - InsuranceCertValidTill
            - createdTime
            - fitnessValidTill
            - model
            - pollutionCertiValidTill
            - roadTaxPaidTill
            - suctionType
            - tankCapicity
            - type
            - vehicleOwner
        sortOrder:
          description: sorting order of the search results
          type: string
          enum:
            - ASC
            - DESC
        status:
          description: "status of request processing - to be enhanced in futuer to include INPROGRESS"
          type: array
          items:
            type: string
        suctionType:
          type: array
          description: Suction model of the vehicle
          items:
            type: string
        tankCapacity:
          type: number
          description: Tank Capacity of the vehicle
          format: double
        tenantId:
          description: Unique id for a tenant
          type: string
        type:
          description: Type of vehicle
          type: array
          items:
            type: string
        vehicleOwner:
          description: Vehicle owner details
          type: array
          items:
            type: string
        vehicleWithNoVendor:
          type: boolean
          description: Vehicle without Vendor
        vendorVehicleStatus:
          type: array
          description: Vendor Vehicle Status
          items:
            type: string      
    ResponseInfo:
      title: ResponseInfo
      type: object
      properties:
        apiId:
          description: unique API ID
          type: string
        msgId:
          description: "message id of the request"
          type: string
        resMsgId:
          description: "unique response message id (UUID) - will usually be the correlation id from the server"
          type: string
        status:
          description: current application status in the system records
          type: string
        ts: 
          description: time in epoch
          type: integer
          format: int64
        ver:
          description: "API version - for HTTP based request this will be same as used in path"
          type: string        
    RequestInfoWrapper:
      title: RequestInfoWrapper
      type: object
      properties:
        RequestInfo:
          $ref: '#/components/schemas/RequestInfo'      
    RequestInfo:
      title: RequestInfo
      type: object
      properties:
        action:
          type: string
          description: "Action on the application in certain"
        apiId:
          description: unique API ID
          type: string
        authToken:
          description: "//session/jwt/saml token/oauth token - the usual value that would go into HTTP bearer token"
          type: string
        correlationId:
          type: string
          description: "RequestInfo should be used to carry meta information about the requests to the server as described in the fields below. All eGov APIs will use requestinfo as a part of the request body to carry this meta information. Some of this information will be returned back from the server as part of the ResponseInfo in the response body to ensure correlation."
        did:
          type: string
          description: "Device ID from which the API is called"
        key:
          description: "API key (API key provided to the caller in case of server to server communication)"
          type: string
        msgId:
          description: "message id of the request"
          type: string
        ts:
          description: time in epoch
          type: integer
          format: int64
        userInfo:
          $ref: '#/components/schemas/User0Req'
        ver:
          description: "API version - for HTTP based request this will be same as used in path"
          type: string
    User0Req:
      title: User0Req
      type: object
      properties:
        emailId:
          description: "email address of the authenticated user"
          type: string
        id:
          type: integer
          description: The unique id an user.
          format: int64
        mobileNumber:
          type: string
          description: Mobile number of the user
        name:
          type: string
          description: The full name of the user.
        roles:
          type: array
          description: List of roles that are attached to the user.
          items:
            $ref: '#/components/schemas/RoleReq'
        tenantId:
          type: string
          description: Unique Identifier of the tenant, Like AP, AP.Kurnool etc.
        type:
          type: string
          description: System set value internally. For employee value will be always
            "EMPLOYEE". For citizen value will be "CITIZEN".
        userName:
          type: string
          description: The unique username used for user login.
        uuid:
          type: string      
          description: "System Generated User id of the authenticated user."
    VehicleRequest:
      type: object
      description: Request for vehicle details
      properties:
        requestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/RequestHeader'
        vehicle:
          $ref: '#/components/schemas/Vehicle'
      required:
        - RequestInfo
        - services
    VehicleResponse:
      type: object
      description: Response of vehicle detail
      properties:
        responseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/RequestHeader'
        vehicle:
          $ref: '#/components/schemas/Vehicle'
        totalCount:
          type: string
          description: count of total records in the system meeting the search criteria
      required:
        - ResponseInfo
        - services
    RoleReq:
      title: RoleReq
      type: object
      properties:
        code:
          description: "Unique code of the role"
          type: string
        id:
          description: "Unique id of the role"
          type: integer
          format: int64
        name:
          description: "Unique name of the role"
          type: string
        tenantId:
          description: "Unique tenantId of the tenant"
          type: string    
    VehicleTrip:
      type: object
      description: |
        vehicle Trip will be created for each trip for a specific service
      
      properties:
        tripOwner:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/UserInfo'
        driver:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/UserInfo'  
        id:
          type: string
          readOnly: true
          description: The server generated unique ID(UUID).
          minLength: 2
          maxLength: 64
        tenantId:
          type: string
          description: Unique identifier of the tenant.
          minLength: 2
          maxLength: 64
        vehicle:
          $ref: '#/components/schemas/Vehicle'
        applicationNo:
          type: string
          description: Unique identifier of the for the vehicleLog generated through idGen Service.
          minLength: 2
          maxLength: 64
        additionalDetail:
          type: object
          description: This is the json object that will carry the actual input (whereever the metadata requries input). Structure should be same as the schema definition provided in the metadata of the service (schema compliance check to be performed at client/server)
        status:
          type: string
          description: Inactive records will be consider as soft deleted 
          enum:
           - ACTIVE
           - INACTIVE
        businessService:
          type: string
          description: business service name of the workflow to be applied for this vehicle. example in FSM Case it will FSM_VEHICLETRIP.
        tripDetails:
          type: array
          items:
            $ref: '#/components/schemas/VehicleTripDetail'
            description: ApplicationNo of the applications like fsm or sw etc..
        applicationStatus:
          type: string
          minLength: 2
          maxLength: 64
          description: status of the application driven by workflow
        tripStartTime:
          type: integer
          format: int64
          description: epoc of the time trip started
        tripEndTime:
          type: integer
          format: int64
          description: epoc of the time trip ended.
        fstpEntryTime:
          type: integer
          format: int64
          description: epoc of the time vehicle entry time at FSTP plant.
        fstpExitTime:
          type: integer
          format: int64
          description: epoc of the time vehicle exit time from FSTP plant.
        volumeCarried:
          type: integer
          format: int64
          description: volume of the material carried by the vehicle in this trip. With respect to FSM this can be maped to wasteDumped.
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/AuditDetails'
      required:
        - tenantId
        - vehicleId
        - businessService
    VehicleTripDetail:
      type: object
      description:  Trip Item contains the items considered in the given trip.
      properties:
        id:
          type: string
          readOnly: true
          description: The server generated unique ID(UUID).
          minLength: 2
          maxLength: 64
        tenantId:
          type: string
          description: Unique identifier of the tenant.
          minLength: 2
          maxLength: 64
        referenceNo:
         type: string
         description: Unique identifier of the tenant.
         minLength: 2
         maxLength: 64
        referenceStatus:
          type: string
          description: this status of the application of FSM. 
        additionalDetail:
          type: object
          description: This is the json object that will carry the actual input (whereever the metadata requries input). Structure should be same as the schema definition provided in the metadata of the service (schema compliance check to be performed at client/server)
        status:
          type: string
          description: Inactive records will be consider as soft deleted 
          enum:
           - ACTIVE
           - INACTIVE
        itemStartTime:
          type: integer
          format: int64
          description: epoc of the time trip started
        itemEndTime:
          type: integer
          format: int64
          description: epoc of the time trip ended.
        volume:
          type: integer
          format: int64
          description: volume of the material collected from the given reference application
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/AuditDetails'
      required:
        - tenantId
        - referenceNo
    VehicleTripDetailResponse:
      title: VehicleTripDetailResponse
      type: object
      properties:
        responseInfo:
          $ref: '#/components/schemas/ResponseInfo'
        totalCount:
          type: integer
          format: int32
        vehicleTripDetail:
          type: array
          items:
            $ref: '#/components/schemas/VehicleTripDetail'    
    VehicleTripSearchCriteria:
      title: VehicleTripSearchCriteria
      type: object
      properties:
        applicationNos:
          type: array
          description: Application Numbers
          items:
            type: string
        applicationStatus:
          description: Application Status
          type: array
          items:
            type: string
        businessService:
          type: string
          description: 'Billing system details e.g., PropertyTax,Water Charges etc.'
        driverIds:
          type: array
          description: Search by list of UUID of of the drivers
          items:
            type: string
        ids:
          description: "List of system generated ids of applications."
          type: array
          items:
            type: string
        limit:
          description: limit 
          type: integer
          format: int32
        offset:
          description: Offset
          type: integer
          format: int32
        refernceNos:
          type: array
          description: Reference Numbers
          items:
            type: string
        sortBy:
          description: sort the search results by fields
          type: string
          enum:
            - applicationStatus
            - applicationiNo
            - createdTime
            - referenceNo
            - tripEndTime
            - tripStartTime
            - vehicle
        sortOrder:
          description: sorting order of the search resulsts
          type: string
          enum:
            - ASC
            - DESC
        tenantId:
          description: "Unique id for a tenant."
          type: string
        tripOwnerIds:
          description: Trip Owner Id credential
          type: array
          items:
            type: string
        vehicleIds:
          description: Unique Vehicle Id credential
          type: array
          items:
            type: string        
    VehicleTripRequest:
      type: object
      description: Request for vehicleTrip details
      properties:
        requestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/RequestHeader'
        VehicleTrip:
          type: array
          items:
          $ref: '#/components/schemas/VehicleTrip'
      required:
        - requestInfo
        - VehicleTrip
    VehicleTripResponse:
      type: object
      description: Response of VehicleTrip detail
      properties:
        responseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/municipal-services/common-contract/docs/common-contract-v2-0-0.yml#/components/schemas/RequestHeader'
        VehicleTrip:
          type: array
          items:
            $ref: '#/components/schemas/VehicleTrip'
        totalCount:
          type: string
          description: count of total records in the system meeting the search criteria
      required:
        - responseInfo
        - VehicleTrip
          
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/WalkingTreeDev/VehicleRegistry/1.0.0