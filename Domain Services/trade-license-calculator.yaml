openapi: 3.0.1
info:
  title: Trade License Calculation APIs
  description: |
    APIs available for Trade License
      - Calculate Trade License.
  contact:
    name: eGovernments Foundation
    email: contacts@egovernments.org
  version: 2.0.0
servers:
- url: /tl-calculator/
paths:
  /v1/_calculate:
    post:
      tags:
      - Trade License Calculation
      summary: Calculates Trade License and generates the respective demands in the
        system.
      description: Calculate Trade License Fee based on criteria.
      requestBody:
        description: required parameters have to be populated
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/CalculationReq'
        required: true
      responses:
        200:
          description: Success response with calculated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/CalculationRes'
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
      x-codegen-request-body-name: calculationReq
  /v1/_getbill:
    post:
      tags:
      - Trade License Bill
      summary: Updates demand with time based penalty if applicable and Generates
        bill for the given criteria.
      description: Generates bill for payment.
      parameters:
      - name: tenantId
        in: query
        description: Unique id for a tenant.
        required: true
        schema:
          type: string
          format: varchar
      - name: applicationNumber
        in: query
        description: Unique Trade application number.
        required: true
        schema:
          type: string
      requestBody:
        description: Parameter to carry Request metadata in the request body
        content:
          '*/*':
            schema:
              $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
        required: false
      responses:
        200:
          description: Success response calculated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/Bill'
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
      x-codegen-request-body-name: requestInfo
  /v1/_estimate:
    post:
      tags:
        - Trade License Calculation
      summary: Estimate Trade License and generates the respective demands in the
        system.
      description: Estimates Trade License Fee based on criteria.
      operationId: estimateUsingPOST
      parameters:
        - name: servicename
          in: query
          description: servicename
          required: true
          schema:
            type: string
      requestBody:
        description: required parameters have to be populated
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CalculationReq'
      responses:
        '200':
          description: Success response with estimated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/CalculationRes'
        '201':
          description: Created
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found    
  /v1/{servicename}/_calculate:
    post:
      tags:
        - Trade License Calculation
      summary: Calculates Trade License and generates the respective demands in the
        system for a particular trade license service.
      description: Calculate Trade License Fee based on criteria for a particular service.
      operationId: calculateUsingPOST_1
      parameters:
        - name: servicename
          in: path
          description: servicename
          required: true
          style: simple
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CalculationReq'
      responses:
        '200':
          description: Success response with calculated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/CalculationRes'
        '201':
          description: Created
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found        
  /v1/{servicename}/_estimate:
    post:
      tags:
        - Trade License Calculation
      summary: Estimate Trade License and generates the respective demands in the
        system for a particular service.
      description: Estimates Trade License Fee based on criteria for a particular service.
      operationId: estimateUsingPOST_1
      parameters:
        - name: servicename
          in: path
          description: servicename
          required: true
          style: simple
          schema:
            type: string
      requestBody:
        description: required parameters have to be populated
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CalculationReq'
      responses:
        '200':
          description: Success response with estimated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/CalculationRes'
        '201':
          description: Created
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found        
  /v1/{servicename}/_getbill:
    post:
      tags:
        - Trade License Calculation
      summary: Updates demand with time based penalty if applicable and Generates
        bill for the given criteria for a particular service.
      description: Generates bill for payment for a particular service.
      operationId: getBillUsingPOST_1
      parameters:
        - name: businessService
          in: query
          description: 'Billing system details e.g., PropertyTax,Water Charges etc.'
          required: false
          style: form
          schema:
            type: string
        - name: consumerCode
          in: query
          description: Consumer code
          required: true
          style: form
          schema:
            type: string
        - name: demandId
          in: query
          description: Unique id for demand
          required: false
          style: form
          schema:
            type: string
        - name: email
          in: query
          description: "email address of the authenticated user"
          required: false
          style: form
          schema:
            type: string
        - name: mobileNumber
          in: query
          description: "mobile number of the authenticated user"
          required: false
          style: form
          schema:
            type: string
        - name: tenantId
          in: query
          description: Unique id for a tenant.
          required: true
          style: form
          schema:
            type: string
        - name: servicename
          in: path
          description: servicename
          required: true
          style: simple
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestInfoWrapper'
      responses:
        '200':
          description: Success response calculated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BillAndCalculations'
        '201':
          description: Created
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found                
  /billingslab/_search:
    post:
      tags:
      - BillingSlab
      summary: Get the list of properties defined in the system for trade license
        calculation.
      description: |
        Get the properties list based on the input parameters.
      parameters:
      - name: tenantId
        in: query
        description: Unique id for a tenant.
        required: true
        schema:
          type: string
          format: varchar
      - name: active
        in: query
        description: True will be set in cases where only active properties are needed
          and False will be set when inactive properties are needed and no value will
          be set when all properties are needed.
        allowEmptyValue: true
        schema:
          type: boolean
          format: varchar
      - name: propertyId
        in: query
        description: Primary key of Property object.
        schema:
          type: string
          format: varchar
      - name: assessmentNumber
        in: query
        description: The unique reference number for a property.
        schema:
          exclusiveMaximum: false
          exclusiveMinimum: true
          maxLength: 128
          minLength: 4
          type: string
      - name: oldAssessmentNumber
        in: query
        description: The unique old assessment no for a Property.
        schema:
          exclusiveMaximum: false
          exclusiveMinimum: true
          maxLength: 128
          minLength: 4
          type: string
      - name: locality
        in: query
        description: Locality boundary where the property is located.
        schema:
          type: integer
          format: int64
      requestBody:
        description: Parameter to carry Request metadata in the request body
        content:
          '*/*':
            schema:
              $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
        required: false
      responses:
        200:
          description: Successful response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BillingSlabRes'
        400:
          description: Invalid input.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
      x-codegen-request-body-name: requestInfo
  /billingslab/_create:
    post:
      tags:
      - BillingSlab
      summary: Create new billing slabs for trade license calculation.
      description: API to billing slabs for trade license calculation.
      requestBody:
        description: Details for the new slab + RequestInfo meta data.
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/BillingSlabReq'
        required: true
      responses:
        201:
          description: Billing Slab(s) created sucessfully
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BillingSlabRes'
        400:
          description: Billing Slab(s) creation failed
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
      x-codegen-request-body-name: billingSlab
  /billingslab/_update:
    post:
      tags:
      - BillingSlab
      summary: Update existing billing slabs.
      description: Updates a given billing slab with new properties
      requestBody:
        description: Request header for the update of billing slab.
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/BillingSlab'
        required: true
      responses:
        200:
          description: Update Billing Slab(s) successful
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BillingSlab'
        400:
          description: Update Billing Slab(s) failed
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'
      x-codegen-request-body-name: billingSlab
  /billingslab/{servicename}/_search:
    post:
      tags:
        - BillingSlab
      summary: Get the list of properties defined in the system for trade license
        calculation for a particular service.
      description: |
        Get the properties list based on the input parameters for a particular service.
      operationId: billingslabSearchPostUsingPOST_1
      parameters:
        - name: accessoryCategory
          in: query
          description: Accessory Category
          required: false
          style: form
          schema:
            type: string
        - name: applicationType
          in: query
          description: Type of application
          required: false
          style: form
          schema:
            type: string
        - name: from
          in: query
          required: false
          style: form
          schema:
            type: number
            format: double
        - name: ids
          in: query
          description: "List of system generated ids of applications."
          required: false
          style: pipeDelimited
          schema:
            type: array
            items:
              type: string
        - name: licenseType
          in: query
          description: "Type of license" 
          required: false
          style: form
          schema:
            type: string
        - name: structureType
          in: query
          description: "Structure type"
          required: false
          style: form
          schema:
            type: string
        - name: tenantId
          in: query
          description: "Unique id for a tenant."
          required: true
          style: form
          schema:
            type: string
        - name: to
          in: query
          
          required: false
          style: form
          schema:
            type: number
            format: double
        - name: tradeType
          in: query
          description: Trade type
          required: false
          style: form
          schema:
            type: string
        - name: type
          in: query
          description: type
          required: false
          style: form
          schema:
            type: string
        - name: uom
          in: query
          required: false
          style: form
          schema:
            type: string
        - name: uomValue
          in: query
          required: false
          style: form
          schema:
            type: number
            format: double
        - name: servicename
          in: path
          description: servicename
          required: true
          style: simple
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
      responses:
        '200':
          description: Success response calculated tax amount.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BillingSlabRes'
        '201':
          description: Created
        400:
          description: Error response in case of failures.
          content:
            '*/*':
              schema:
                $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ErrorRes'  
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not Found    
  
components:
  schemas:
    RequestInfoWrapper:
      title: RequestInfoWrapper
      type: object
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
    BillAndCalculations:
      title: BillAndCalculations
      type: object
      properties:
        billResponse:
          $ref: '#/components/schemas/BillResponse'
        billingSlabIds:
          $ref: '#/components/schemas/BillingSlabIds'    
      description: This object stores the value of Bill and Calculations
    BillingSlabIds:
      title: BillingSlabIds
      type: object
      properties:
        accesssoryBillingSlabIds:
          type: array
          items:
            type: string
          description: Accessory Billing Slab Ids
        consumerCode:
          type: string
          description: Consumer code
        tradeTypeBillingSlabIds:
          type: array
          description: Trade type Billing slabs
          items:
            type: string       
    BillResponse:
      title: BillResponse
      type: object
      properties:
        Bill:
          type: array
          items:
            $ref: '#/components/schemas/Bill'
        ResposneInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ResponseInfo'      
    CalulationCriteria:
      required:
      - tenantId
      type: object
      properties:
        tradelicense:
          $ref: '#/components/schemas/TradeLicense'
        applicationNumber:
          maxLength: 64
          minLength: 2
          type: string
          description: application number
        tenantId:
          maxLength: 256
          minLength: 2
          type: string
          description: "Unique id for a tenant."
      description: Either tradelicense object or the application number is mandatory
        apart from tenantid.
    Calculation:
      type: object
      properties:
        applicationNumber:
          type: string
          description: TradeLicense application number.
        totalAmount:
          type: number
          description: Total payable tax amount.
          format: double
        penalty:
          type: number
          description: Total Penality if applicable.
          format: double
        exemption:
          type: number
          description: Total Exemption amount if applicable.
          format: double
        rebate:
          type: number
          description: Total Rebate amount if applicable.
          format: double
        tenantId:
          maxLength: 256
          minLength: 2
          type: string
          description: "Unique id for a tenant."
    BillingSlab:
      required:
      - tenantId
      type: object
      properties:
        tenantId:
          maxLength: 128
          minLength: 4
          type: string
          description: Unique ulb identifier
        id:
          maxLength: 64
          minLength: 2
          type: string
          description: unique identifier of the billing slab uuid
        licenseType:
          type: string
          description: LicenseType, is unique enum value for a license
          enum:
          - TEMPORARY
          - PERMANENT
        structureType:
          maxLength: 64
          minLength: 2
          type: string
          description: StructureType and Structure subtype, this mdms data.
        tradeType:
          maxLength: 64
          minLength: 2
          type: string
          description: value from Trade type master of mdms .
        accessoryCategory:
          maxLength: 64
          minLength: 2
          type: string
          description: Accessory Category is a master from mdms .
        type:
          type: string
          description: Type will define the rate value is flat amount or rate.
          enum:
          - RATE
          - FLAT
        rate:
          maxLength: 64
          minLength: 2
          type: string
          description: Rate of the trade license, this can be the rate of flat amount
            based on type.
        uom:
          maxLength: 32
          minLength: 2
          type: string
          description: unit of measurement of trade type.
        from:
          maxLength: 64
          minLength: 2
          type: string
          description: uom value lower bound.
        to:
          maxLength: 64
          minLength: 2
          type: string
          description: uom value upper bound.
    CalculationReq:
      required:
      - RequestInfo
      type: object
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
        CalulationCriteria:
          type: array
          items:
            $ref: '#/components/schemas/CalulationCriteria'
    CalculationRes:
      type: object
      properties:
        ResponseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ResponseInfo'
        Calculation:
          type: array
          items:
            $ref: '#/components/schemas/Calculation'
    BillingSlabReq:
      required:
      - RequestInfo
      type: object
      properties:
        RequestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/RequestInfo'
        BillingSlab:
          type: array
          items:
            $ref: '#/components/schemas/BillingSlab'
    BillingSlabRes:
      type: object
      properties:
        ResponseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/ResponseInfo'
        BillingSlab:
          type: array
          items:
            $ref: '#/components/schemas/BillingSlab'
    Bill:
      type: object
      properties:
        id:
          type: string
          description: Id of the bill
        mobileNumber:
          type: string
          description: MobileNumber of the payer.
        payerName:
          type: string
          description: name of the payer.
        payerAddress:
          type: string
          description: Address details from the payer.
        payerEmail:
          type: string
          description: email address of the payer.
        isActive:
          type: boolean
          description: true when active bill is created, false when inactive bill
            is created.
        isCancelled:
          type: boolean
          description: true when cancelled bill is cancelled, false when non-cancelled
            bill is created.
        additionalDetails:
          type: object
          properties: {}
          description: field for capturing any additional details.
        taxAndPayments:
          type: array
          items:
            $ref: '#/components/schemas/taxAndPayment'
        billDetails:
          type: array
          items:
            $ref: '#/components/schemas/BillDetail'
        tenantId:
          maxLength: 128
          minLength: 4
          type: string
          description: Unique Identifier of the tenant
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
    taxAndPayment:
      type: object
      properties:
        businessService:
          type: string
          description: unique code of the business service
        taxAmount:
          type: string
          description: amount to be paid by the payer
        amountPaid:
          type: string
          description: amount paid by the payer
    BillDetail:
      type: object
      properties:
        id:
          type: string
          description: Id of bill details
        tenantId:
          maxLength: 256
          minLength: 4
          type: string
          description: Unique Identifier of the tenant
        demandId:
          type: string
          description: Unique Identifier of the demand associated with the bill detail
        bill:
          type: string
          description: Id of bill
        businessService:
          type: string
          description: BusinessService code.
        billNumber:
          type: string
          description: Bill number.
        billDate:
          type: number
          description: Bill date.
          format: int64
        consumerCode:
          type: string
          description: Consumer code of the entity for which the bill is being created.
        consumerType:
          type: string
          description: Type of the entity for which the bill is being created.
        minimumAmount:
          type: number
          description: Minimum bill amount to be paid.
        totalAmount:
          type: number
          description: Total bill amount to be paid.
        fromPeriod:
          type: number
          description: starting date of the demand period referred by the bill detail.
          format: int64
        toPeriod:
          type: number
          description: ending date of the demand period referred by the bill detail.
          format: int64
        collectedAmount:
          type: number
          description: sum of the amount which has been collected for the demand.
        collectionModesNotAllowed:
          type: array
          description: List of collection modes not allowed.
          items:
            type: string
        partPaymentAllowed:
          type: boolean
          description: true if part payment allowed, false if part payment is not
            allowed.
        additionalDetails:
          type: object
          properties: {}
          description: field for capturing any additional details.
        billAccountDetails:
          type: array
          items:
            $ref: '#/components/schemas/BillAccountDetail'
        status:
          type: string
          description: status if the bill detail
          enum:
          - CREATED
          - CANCELLED
          - INSTRUMENT_BOUNCED
    BillAccountDetail:
      type: object
      properties:
        id:
          type: string
          description: Id of bill account details
        tenantId:
          maxLength: 128
          minLength: 4
          type: string
          description: Unique Identifier of the tenant
        billDetail:
          type: string
          description: Id of billdetail
        demandDetailId:
          type: string
          description: unique id of the demand detail object.
        order:
          type: integer
          description: Order number used for apportioning amount in case of part payment.
          format: int32
        amount:
          type: number
          description: Credit account head amount to be paid.
        adjustedAmount:
          type: number
          description: Credit account head amount.
        isActualDemand:
          type: boolean
          description: True for tax/charges/penalty. False for advances(if any).
        glcode:
          type: string
          description: field for capturing the glcode value.
        taxHeadCode:
          type: string
          description: field for capturing the taxhead-code value.
        additionalDetails:
          type: object
          properties: {}
          description: field for capturing any additional details.
        purpose:
          type: string
          description: Purpose of Account head.
          enum:
          - ARREAR
          - CURRENT
          - ADVANCE
    TradeLicense:
      required:
      - commencementDate
      - licenseType
      - tenantId
      - tradeLicenseDetail
      type: object
      properties:
        id:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique Identifier of the Trade License (UUID)
          readOnly: true
        tenantId:
          maxLength: 128
          minLength: 2
          type: string
          description: Unique Identifier of ULB
        name:
          maxLength: 256
          minLength: 2
          type: string
          description: Name of the trade.
        licenseType:
          type: string
          description: Unique Identifier of the Trade License (UUID)
          enum:
          - TEMPORARY
          - PERMANENT
        licenseNumber:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique License Number of the Trade. This is  unique in system
            for a tenant. This is mandatory but always be generated on the final approval.
            In Case of Legacy License User will enter the Old License Number.
          readOnly: true
        oldLicenseNumber:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique Old License Number of the Trade. This is  unique in
            system for a tenant. This is mandatory  for legacy license(DataEntry).
        propertyId:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique property id.
        oldPropertyId:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique Old property id.
        applicationDate:
          type: integer
          description: date on which applicaiton has been generated for new Trade
            License.
          format: int64
          readOnly: true
        commencementDate:
          type: integer
          description: Commencement Date of the trade as epoch
          format: int64
        issuedDate:
          type: integer
          description: 1. License issued Date of the trade as epoch. 2. Application
            approval date.
          format: int64
          readOnly: true
        financialYear:
          maxLength: 64
          minLength: 2
          type: string
          description: TradeLicense applicable for financial year.
        validFrom:
          type: integer
          description: Date from when license is valid as epoch
          format: int64
        validTo:
          type: integer
          description: Expiry Date of the Trade License as epoch
          format: int64
        action:
          type: string
          description: 1. Perform action to change the state of the trade license.
            2. INITIATE, if application is getting submitted without required document.
            3. APPLY, if application is getting submitted with application documents,
            in that case api will validate all the required application document.
            4. APPROVE action is only applicable for specific role, that role has
            to be configurable at service level. Employee can approve a application
            only if application is in APPLIED state and Licesance fees is paid.
          enum:
          - INITIATE
          - APPLY
          - APPROVE
          - REJECT
          - CANCEL
        status:
          type: string
          description: Unique identifier (code) of the Trade license Status
          enum:
          - INITIATED
          - APPLIED
          - APPROVED
          - REJECTED
          - CANCELED
        tradeLicenseDetail:
          $ref: '#/components/schemas/TradeLicenseDetail'
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
      description: A Object holds the basic data for a Trade License
    TradeLicenseDetail:
      required:
      - channel
      - owners
      - subOwnerShipCategory
      - tradeUnits
      type: object
      properties:
        surveyNo:
          type: string
          description: Survey number.
        subOwnerShipCategory:
          type: string
          description: Unique code of SubOwnerShipCategory from SubOwnerShipCategory
            master of MDMS.
        structureType:
          maxLength: 64
          minLength: 2
          type: string
          description: StructureType and Structure subtype, this mdms data.
        operationalArea:
          type: number
          description: This is always in sq yard.
          format: double
        owners:
          type: array
          description: Trade owners, these will be citizen users in system.
          items:
            $ref: '#/components/schemas/OwnerInfo'
        channel:
          maxLength: 64
          minLength: 2
          type: string
          description: License can be created from different channels
          enum:
          - COUNTER
          - CITIZEN
          - DATAENTRY
        address:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/Address'
        tradeUnits:
          type: array
          description: Send list of trades here.
          items:
            $ref: '#/components/schemas/TradeUnit'
        accessories:
          type: array
          description: Send list of accessories here.
          items:
            $ref: '#/components/schemas/Accessory'
        applicationDocuments:
          type: array
          description: 1. List of all the required documents. 2. Application can be
            submitted without required document 3. Once all the document submitted
            then only application submition process will be completed. 4. Mandatry
            application documents for a trade type are defined under ApplicationDocument
            master which is defined under MDMS.
          items:
            $ref: '#/components/schemas/Document'
        verificationDocuments:
          type: array
          description: 1. Verification Documents will uploaded at the time of approval.
            2. Mandatry verification documents for a trade type are defined under
            VerificationDocument master which is defined under MDMS.
          items:
            $ref: '#/components/schemas/Document'
        additionalDetail:
          type: string
          description: Json object to store additional details about license
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
      description: A Object holds the basic data for a Trade License
    Boundary:
      required:
      - code
      - name
      type: object
      properties:
        code:
          type: string
          description: code of the boundary.
        name:
          type: string
          description: name of the boundary.
        label:
          type: string
          description: localized label for the boundry.
        latitude:
          type: string
          description: latitude of the boundary.
        longitude:
          type: string
          description: longitude of the boundary.
        children:
          type: array
          items:
            $ref: '#/components/schemas/Boundary'
        materializedPath:
          type: string
          description: materialized path of the boundary - this would be of the format
            tenantid.[code] from parentt till teh current boundary
          readOnly: true
    TradeUnit:
      required:
      - tenantId
      type: object
      properties:
        tenantId:
          maxLength: 128
          minLength: 2
          type: string
          description: Unique Identifier of ULB
        tradeType:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique Identifier of the Trade License (UUID)
        uom:
          maxLength: 32
          minLength: 2
          type: string
          description: Unique License Number of the Trade. This is  unique in system
            for a tenant. This is mandatory but always be generated on the final approval.
            In Case of Legacy License User will enter the Old License Number.
        uomValue:
          maxLength: 32
          minLength: 2
          type: string
          description: Unique License Number of the Trade. This is  unique in system
            for a tenant. This is mandatory but always be generated on the final approval.
            In Case of Legacy License User will enter the Old License Number.
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
      description: A Object holds the basic data for a Trade License
    Accessory:
      required:
      - tenantId
      type: object
      properties:
        tenantId:
          maxLength: 128
          minLength: 2
          type: string
          description: Unique Identifier of ULB
        accessoryCategory:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique Identifier of the Trade License (UUID)
        uom:
          maxLength: 32
          minLength: 2
          type: string
          description: Unique License Number of the Trade. This is  unique in system
            for a tenant. This is mandatory but always be generated on the final approval.
            In Case of Legacy License User will enter the Old License Number.
        uomValue:
          maxLength: 32
          minLength: 2
          type: string
          description: Unique License Number of the Trade. This is  unique in system
            for a tenant. This is mandatory but always be generated on the final approval.
            In Case of Legacy License User will enter the Old License Number.
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
      description: A Object holds the basic data for a Trade License
    Document:
      required:
      - documentType
      - fileStoreId
      - tenantId
      type: object
      properties:
        tenantId:
          maxLength: 128
          minLength: 2
          type: string
          description: Unique Identifier of ULB
        documentType:
          maxLength: 64
          minLength: 2
          type: string
        fileStoreId:
          maxLength: 64
          minLength: 2
          type: string
          description: Unique file store id of uploaded document.
        documentUid:
          maxLength: 64
          minLength: 2
          type: string
          description: document number(eg.Pan number, aadhar number).
        auditDetails:
          $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/AuditDetails'
      description: A Object holds the basic data for a Trade License
    OwnerInfo:
      allOf:
      - $ref: 'https://raw.githubusercontent.com/egovernments/DIGIT-Specs/master/Common%20Services/common-contract.yaml#/components/schemas/User'
      - type: object
        properties:
          isPrimaryOwner:
            type: boolean
            description: The owner is primary or not
          ownerShipPercentage:
            type: number
            description: Ownership percentage.
            format: double
          ownerType:
            maxLength: 256
            minLength: 4
            type: string
            description: Type of owner, based on this option Exemptions will be applied.
              This is master data defined in mdms.
          relationship:
            type: string
            description: Relationship with owner.
            enum:
            - FATHER
            - HUSBAND
          documents:
            type: object
            description: Document of the owner.
